<!DOCTYPE html><html lang="en"><head><title>Registry</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="Registry"><meta name="groc-project-path" content="src/Registry.coffee"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path">src/Registry.coffee</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><p>Internal registry for schemas created by <code>Scheming.create</code>. Schemas are registered by their name, which is either
provided at time of creation, or generated as a uuid.</p></div></div><div class="code"><div class="wrapper"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Registry</span></span>
  constructor : <span class="hljs-function">-&gt;</span>
    <span class="hljs-property">@schemas</span> = {}</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Used internally as part of <code>Scheming.create</code>, do not need to expose registration outside of Schema creation.</p></div></div><div class="code"><div class="wrapper">  register : <span class="hljs-function"><span class="hljs-params">(name, model)</span> =&gt;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Throw an error on naming collisions</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-keyword">if</span> <span class="hljs-property">@schemas</span>[name]
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Error <span class="hljs-string">"Naming conflict encountered. Model <span class="hljs-subst">#{name}</span> already exists"</span>
    <span class="hljs-property">@schemas</span>[name] = model</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="get">get</h3>
<p>Retrieves a schema by registered name</p></div></div><div class="code"><div class="wrapper">  get : <span class="hljs-function"><span class="hljs-params">(name)</span> =&gt;</span>
    <span class="hljs-keyword">return</span> <span class="hljs-property">@schemas</span>[name]</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="reset">reset</h3>
<p>Resets the state of the Schema registry. Mainly exposed for testing, but could have use in production.</p></div></div><div class="code"><div class="wrapper">  reset : <span class="hljs-function">=&gt;</span>
    <span class="hljs-property">@schemas</span> = {}

<span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">new</span> Registry()</div></div></div></div></body></html>